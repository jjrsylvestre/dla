% *********************************************************************
% © 2016–2021 Jeremy Sylvestre
%
% Permission is granted to copy, distribute and/or modify this document
% under the terms of the GNU Free Documentation License, Version 1.3 or
% any later version published by the Free Software Foundation; with no
% Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A
% copy of the license is included in the appendix entitled “GNU Free
% Documentation License” that appears in the output document of this
% PreTeXt source code. All trademarks™ are the registered® marks of
% their respective owners.
%
% *********************************************************************
\tdplotsetmaincoords{105}{30}
\begin{tikzpicture}[
	point/.style={circle,draw,very thin,fill,inner sep=0pt,minimum size=4pt},
	vector/.style={-latex},
	tdplot_main_coords
]

	% plane through the origin with normal vector (1,-1,2)
	% orthog basis used to draw sides: (1,1,0) and (1,1,-1)

	% fill for plane
	\filldraw[opacity=0.25,gray] (-1.5,-0.5,0.5) to (4,5,0.5) to (6.5,2.5,-2) to (1,-3,-2) to cycle;

	% plane border
	\draw[dotted] (-1.5,-0.5,0.5) to (4,5,0.5) to (6.5,2.5,-2) to (1,-3,-2) to cycle;

	% plane label
	\node at (6,2,-2.4) {$U_2 = \Span \{\uvec{e}_1, \uvec{e}_2\}$};

	% origin
	\node[point] at (0,0,0) (o) [label=left:{$\zerovec$}] {};

	% perp space
	\draw (o) to (1.5,-1.5,3) node[right] {$\orthogcmp{U}_2$};
	\draw[dashed] (o) -- (-0.5,0.5,-1);
	\draw (-0.5,0.5,-1) -- (-0.75,0.75,-1.5);

	% plane vectors
	\draw[vector,thick] (o) to node[right,at end] {$\uvec{e}_1$} (0.75,1,0.125);
	\draw[vector,thick] (o) to node[left,at end] {$\uvec{e}_2$}  (1.7,-1.1,-1.4);
	\draw[vector,thick] (o) to node[below,sloped,near end] {$\proj_U \uvec{v}_3$} (4.2,2.4,-0.9);
	\draw[vector,thick] (o) to node[above left] {$\uvec{v}_3$} (5.2,1.4,1.1);
	\draw[thick,dashed] (4.2,2.4,-0.9) to (5.2,1.4,1.1);
	\draw[vector,thick] (o) to node[left,near end] {$\uvec{e}_3 = \proj_{\orthogcmp{U}} \uvec{v}_3$} (1,-1,2);
	\draw[dashed] (5.2,1.4,1.1) to (1,-1,2);

	% perp symbols
	\draw[thin] (3.99,2.28,-0.855) to (4.09,2.18,-0.655) to (4.3,2.3,-0.7);
	\draw[thin] (0.21,0.12,-0.045) to (0.31,0.02,0.155) to (0.1,-0.1,0.2);

\end{tikzpicture}
